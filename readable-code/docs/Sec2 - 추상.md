# Section2 추상
#### ✅ 클린 코드, 리팩 토링 과정의 Best-Practice 는 TestCode 가 생성되는 Cycle 이다 <br>
- 리팩토링 대상/범위 확인 -> 기능 보장을 위한 테스트 코드 작성 -> 리팩토링 -> 테스트 코드로 검증
- 실제 상황에서는 테스트 코드가 없는 환경이 더 많다.
  - 하지만 리팩토링을 위해서 테스트 코드는 꼭 필요하다.
- 즉 테스트 코드가 동반된 리팩토링 사이클이 제일 좋은 Practice 는 변함이 없다.
    
#### 도메인: 해결하고자 하는 문제 영역 -> 비즈니스 적인 성향을 가지고 있음
#### 도메인 지식: 도메인을 이해하고 해결하는데 필요한 지식

> 우리가 클린 코드 추구하는 이유?

바로 가독성 때문이라고 생각합니다<br>
가독성이 좋다? -> 코드가 잘 읽힌다 -> 이해가 잘된다? -> 코드를 잘 짠다 -> 유지보수 하기가 수월하다 -> 개발자의 시간과 자원을 절약한다 <br>

이런 플로우를 가질 수 있다 <br>

클린 코드라 지칭하는 수많은 원칙들, 조언들 당연히 지키면 좋은데 왜 지켜야 할까? <br>
상황에 따라 분명 코드를 짜는 방법은 다를 것이다 <br>

> 프로그램? = 데이터 + 코드

### 추상과 구체
추상은 중요한 정보는 **가려내어** 남기고, 덜 중요한 정보는 생략하여 **버린다** <br>

기계어에 가까울 수록 저수준언어, 우리가 보는 언어는 다 고수준 언어라고 보면 된다 <br>

하드웨어 -> 운영체제 -> 애플리케이션 예시가 추상화가 잘 되어 있다 <br>
- 하드웨어를 조작하기 위해 운영체제가 추상화 되어있다.
- 애플리케이션은 하드웨어를 신경 쓸 필요가 없다. 왜냐? 운영체제가 하드웨어를 조작해주기 때문 

ex) OSI 7 Layer 또한 추상화가 된 예시로 볼 수 있다 <br>

사실상 컴퓨터과학 자체가 추상 그 자체이다 <br>
컴퓨터는 0,1 밖에 모르는데 지금 고수준 작업을 할 수 있다. 그 이유는 추상 때문에 가능 한 것이다 <br>
컴퓨터 과학은 추상화 과정이 조화롭게 겹겹이 쌓여서 만들어진다 <br>

적절한 추상화는 복잡한 데이터와 복잡한 로직을 단순화하여 이해하기 쉽도록 돕는다 <br>
-> 읽기가 좋다 <br>

#### '잘못된 추상화' 가 cause 하는 side-effect 는 생각보다 damage 가 크다 
#### '적절한 추상화' 는 해당 도메인의 문맥 안에서 정말 중요한 핵심 개념만 남겨서 표현하는 것 이다.

### 이름 짓기 
<hr>

#### 단수와 복수를 구분하기
- 끝에 '-(e)s' 를 붙여 어떤 데이터(변수,클래스)가 단수인지,복수인지를 나타내는 것만으로도 읽는 이에게 중요한 정보를 같이 전달할 수 있다.

#### 이름 줄이지 않기
- 줄임말은 가독성을 제물로 바쳐 효율성을 얻는 것이다. 하지만 읽는 것에 비해 얻는 것이 적다.
- 자제하는 것은 좋으나, 관용어처럼 사람들이 자주 사용하는 줄임말 정도는 존재한다.
  - ex) column -> col, latitude -> lat, request -> req
  - ex) count -> cnt (추천X)
- 자주 사용하는 줄임말이 이해될 수 있는 것은 사실 문맥 때문 이다

#### 은어/방언 사용하지 않기
- 농담에서 파생된 용어/우리 팀만 아는 용어 금지
  - Q. 새로운 사람이 팀에 합류했을 때 이 용어를 단번에 이해할 수 있나?
- 도메인 용어 사용하기
  - 도메인 용어를 먼저 정의하는 과정이 먼저 필요할 수도 있다.

#### 좋은 코드를 보고 습득하기
- 비슷한 상황에서 자주 사용하는 단어, 개념 습득하기
- 오픈소스들을 많이 보자

### 메소드와 추상화
잘 쓰여진 글이라면 한 문단의 주제는 반드시 하나이다 <br>
코드도 똑같다, 한 메소드의 주제는 반드시 하나이다 <br>

메소드의 이름으로 구체적인 내용을 추상화 한다.<br>

### 메소드 선언부
> 반환타입 메소드명 (파라미터) { }

[반환타입 TIP]
- 메소드 시그니처에 납득이 가는, 적절한 타입의 반환값 돌려주기
  - 반환타입이 boolean 인데, 이게 이 메소드에서 무엇을 의미하는 걸까?
- void 대신 충분히 반환할 만한 값이 있는지 고민해보기
  - 반환값이 있다면 테스트도 용이해 진다.

[메소드명 TIP]
- 추상화된 구체를 유추할 수 있는, 적절한 의미가 담긴 이름
- 파라미터와 연결지어 더 풍부한 의미를 전달할 수도 있다.

[파라미터 TIP]
- 파라미터의 타입,개수,순서를 통해 의미를 전달
- 파라미터는 외부 세계와 소통하는 창 이다.
  - ex) 나는 무슨 요리를 하기 위해 이러이러한 것들(=파라미터들) 이 필요해~

```java
// 무엇으로부터 column 을 변환할 것인가? -> From 과 Parameter 가 이어진다는 느낌으로 읽는다 ~뭐로부터 받아서 변환을 할 것인지
int selectedColIndex = convertColFrom(cellInputCol);
```

추상화는 코드의 양도 중요하지만, 코드의 의미가 더 중요하다, 코드의 길이가 적어도 추상화는 진행한다 <br>

## 추상화 레벨
메소드 구현부는 -> 내부 세계 <br>
- 추상화 레벨이 낮다. -> 구체 쪽이기 때문에 추상화 레벨이 낮다.
  - (구체적일 수록 추상화 레벨이 낮다)

메소드 호출부는 -> 외부 세계 <br>
- 추상화 레벨이 높다

내부, 외부의 커뮤니케이션은 return 타입과 파라미터를 통하여 소통을 진행한다 <br>

객체 레벨에서 본다면, private, public ,protected 를 통해 메소드 사용 레벨 또한 지정한다 <br>

#### 그러나 하나의 세계 안에서는, 추상화 레벨이 동등해야 한다 ? 이게 무슨 뜻일까?
```java
public static void main (String[] args) {
	showGameStartComments();
	initializeGame();
	showBoard();
	if (gameStatus == 1) {
		System.out.println("지뢰를 모두 찾았습니다. GAME CLEAR!");
		break;
	}
}
```

위 코드를 보면 메소드가 3개가 연속해서 나오다가 갑자기 구체적으로 구현을 하는 if 문이 나오게 된다 <br>
즉 읽는 사람이 흐름대로 쭉 읽는게 아닌, 중간에 해석을 하는 걸 의미한다 <br>

메소드로 추출이 되어있는 것들은 추상화 레벨이 높고, 메소드 추출이 아닌, 직접 구현되고 있는 것들은 추상화 레벨이 낮다고 한다 <br>
즉 추상화 레벨이 높은 메소드가 나오다가 갑자기 구현부가 나오면서 추상화 레벨이 낮아진다 <br>

추상화 레벨이 맞지 않는 순간, 읽는 사람은 메소드를 이해하기 힘들어진다 <br>

```java
if (doesUserWinTheGame()) {
	System.out.println("지뢰를 모두 찾았습니다. GAME CLEAR!");
	break;
}
```

위 처럼 doesUserWinTheGame() 메소드로 추출해서 true,false 값을 할당할 수 있다 <br>

### 매직넘버, 매직 스트링?
위 단어의 뜻은 의미를 갖고 있으나, 상수로 추출되지 않는 숫자, 문자열 등 <br>
상수 추출로 이름을 짓고 의미를 부여함으로써 **가독성, 유지보수성**이 올라갈 수 있다 <br>

#### 상수로 추출한다는 것의 의미?
상수로 추출은 이제 불변의값(Immutable) 한 값들을 의미한다 <br>

```java
private static final int BOARD_ROW_SIZE = 8;
private static final int BOARD_COLUMN_SIZE = 10;
private static final String FLAG_SIGN = "⚑";
private static final String LAND_MINE_SIGN = "*";
private static final String CLOSED_CELL_SIGN = "□";
private static final String OPENED_CELL_SIGN = "◼️";
private static final String[][] BOARD = new String[BOARD_ROW_SIZE][BOARD_COLUMN_SIZE];
private static final Integer[][] LAND_MINE_COUNTS = new Integer[BOARD_ROW_SIZE][BOARD_COLUMN_SIZE];
private static final boolean[][] LAND_MINES = new boolean[BOARD_ROW_SIZE][BOARD_COLUMN_SIZE];
```

Java 에서 상수에 Naming Convention 은 대문자 or "_" 로 표시한다. <br>
상수로 추출한 숫자, 문자열은 유지보수할 때 깊게 봐야한다 <br>
<br>

## 미션2
### 예시
추상: 풋살에서 슛을 한다
구체 
- 뇌를 통해 슛을 해야겠다 생각을 한다.
- 뇌가 신체의 다른부분 에게 명령을 한다.
- 명령1: 눈은 공에 위치를 똑바로 확인하고 조준을 해
- 명령2: 다리에게 오른발을 세게 휘둘러서 공을 맞춰
- 오른발을 휘두르는 과정에서 하체의 여러 관절 및 근육들과 커뮤니케이션을 통해 작용한다.
- 눈과 다리가 신경계를 통해 이 명령이 전달되며 엄청 빠른속도로 눈과 다리에게 전파가 된다.
- 명령을 전달 받은 눈과 다리는 명령을 받아 순차적으로 명령1, 명령2 를 실행한다
- 결론적으로 사람이 슛을 한다.